
# Adobe Hackathon Task 1B: Persona-Based Document Section Ranking

## Overview
A CPU-optimized system that **ranks extracted PDF sections (headings) based on a persona‚Äôs job-to-be-done**.  
It leverages **TF-IDF vectorization** and **cosine similarity** to identify which parts of a document are most relevant for a given persona.

This solution is part of a modular pipeline and assumes that **topics and headings have already been extracted** using the hybrid ML + fallback extractor.

---

## ‚ú® Features

‚úÖ **Persona-driven ranking** ‚Äì Takes persona description & job-to-be-done as input and prioritizes relevant headings.  
‚úÖ **Semantic scoring** ‚Äì Uses TF-IDF + cosine similarity for fast, explainable ranking.  
‚úÖ **Lightweight & CPU-only** ‚Äì Runs efficiently without GPU or internet.  
‚úÖ **Configurable output** ‚Äì Top N ranked sections stored in `persona_ranked.json`.  

---

## ‚öôÔ∏è Architecture

1Ô∏è‚É£ **Input Loader**  
   - Reads `topics_headings.json` (generated by extraction program).  
   - Loads persona & job-to-be-done (from ENV or code).  

2Ô∏è‚É£ **TF-IDF Vectorizer**  
   - Converts persona query and extracted headings into vector space.  

3Ô∏è‚É£ **Cosine Similarity Scoring**  
   - Scores each heading for relevance to persona‚Äôs task.  

4Ô∏è‚É£ **Ranking Engine**  
   - Sorts headings by importance (descending).  
   - Stores top-ranked sections into `persona_ranked.json`.

---

## üîç Algorithm Details

- **Query Formation**: Combines persona description and job-to-be-done into one query string.  
- **Text Cleaning**: Removes punctuation, lowercases text for consistency.  
- **TF-IDF Scoring**: Measures term relevance across all headings.  
- **Cosine Similarity**: Scores each heading against the persona query.  
- **Sorted Output**: Highest scores indicate highest relevance.

---

## üìÇ Input / Output

**Input:**
- `topics_headings.json` (from Program #1)
- Persona & Job (ENV variables or defaults)

**Output:**
- `persona_ranked.json` with:
  ```json
  {
    "metadata": {
      "persona": "Investment Analyst",
      "job_to_be_done": "Analyze R&D spending trends",
      "processed_timestamp": "2025-07-27T12:45:00",
      "total_documents": 7
    },
    "ranked_sections": [
      {
        "document": "Annual_Report_2023.pdf",
        "page": 5,
        "section_title": "R&D Expenditures",
        "importance_rank": 0.8452
      }
    ]
  }
  ```

---

## üì¶ Dependencies

- **scikit-learn** ‚Äì TF-IDF vectorization, cosine similarity  
- **pandas** ‚Äì Structured data handling  
- **numpy** ‚Äì Numerical operations  
- **PyMuPDF** ‚Äì PDF handling (if needed for heading extraction context)

## ‚ñ∂Ô∏è How to Run Dockerfile

## COMMAND TO BUILD IMAGE ON POWERSHELL
docker build --platform linux/amd64 -t pdf-parser:v1 .

### Run the Container
### POWERSHELL RUN COMMAND

docker run --rm `
  -v "${PWD}\input:/app/input" `
  -v "${PWD}\output:/app/output" `
  -e PERSONA="traveller" `
  -e JOB_TO_BE_DONE="Visit places and learn about cuisines and traditions" `
  -e MIN_CONFIDENCE=0.2 `
  --network none `
  pdf-parser:v1

<!-- Adjust MIN_CONFIDENCE to improve the quality or quantity of relevant sub-sections. -->

<!-- Change PERSONA and JOB_TO_BE_DONE according to user prefrence -->

---

## üìà Future Enhancements

- **Use of semantic embeddings (MiniLM)** for deeper understanding of persona-task context.  
- **Threshold-based filtering** ‚Äì Only include headings with similarity above X%.  
- **Context-aware ranking** ‚Äì Factor in nearby headings & paragraph context.
- **Deep Learning Use** ‚Äì Use of Deep Learning to improve detection and accuracy. 
